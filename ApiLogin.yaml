openapi: 3.0.0
x-stoplight:
  id: mbapm8z3lg6wm
info:
  version: '1.0'
  title: API - Login
  description: ''
servers:
  - description: dev server
    url: 'https://netvy-api-dev.onyxsoft.co'
paths:
  /v1/login:
    post:
      summary: Login
      operationId: post-login
      responses:
        '200':
          $ref: '#/components/responses/login-200-response'
        '400':
          $ref: '#/components/responses/login-400-response'
        '404':
          $ref: '#/components/responses/login-404-response'
        '500':
          $ref: '#/components/responses/login-500-response'
      description: ''
      requestBody:
        $ref: '#/components/requestBodies/login-request'
      x-stoplight:
        id: 7orm8rgv6lkg2
      parameters:
        - license: null
          $ref: '#/components/parameters/license'
    parameters: []
components:
  parameters:
    license:
      name: license
      in: header
      description: license obtained from license server
      schema:
        type: string
        example: NETVY-DEMO
      required: true
  schemas:
    login-model:
      title: Credentials
      x-stoplight:
        id: 948nrwaphwnav
      type: object
      properties:
        user:
          type: string
          description: username for onyxerp user account
          x-stoplight:
            id: fohuteogtldjh
        pass:
          type: string
          description: password for onyxerp user
          x-stoplight:
            id: kiwfgqxi223ms
      example: null
  securitySchemes: {}
  requestBodies:
    login-request:
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                type: string
                description: 'Example: user@example.com'
              pass:
                type: string
                description: 'Example: mypass123'
            required:
              - user
              - pass
          examples:
            Example:
              $ref: '#/components/examples/login-example'
      description: ''
  examples:
    login-example:
      value:
        description: Example Login example
        type: object
        properties:
          user:
            type: string
          pass:
            type: string
        required:
          - user
          - pass
        example:
          value:
            user: user@example.com
            pass: mypass123
  responses:
    login-200-response:
      description: Ok
      content:
        application/json:
          schema:
            type: object
            x-examples:
              Example 1:
                statusCode: 200
                message: Request processed successfully
                content:
                  token: eyAidHlwIjoiSldUIiwgImFsZyI6IkhTMjU2IiB9.eyAidXNlcklEIjoiMSIsICJjdXN0b21lcklEIjoiMjkiLCAicnV0YUZvdG8iOiIiLCAidXNlck5hbWUiOiJBRE1JTklTVFJBRE9SIiwgImFkbWluaXN0cmFkb3IiOiIxIiwgImVtcHJlc2FJRCI6IjEiLCAiYXBpS2V5IjoibWlzZWNyZXRpdG8iLCAiaWF0IjoxNjY4NjE0NTg2LCAiZXhwIjoxNjY4NjIxNzg2IH0.CH41WeuWJD-yDF_TmXtk47RPUBwUp3IkdTedvuO8yvQ
                  usuarioID: 1
            properties:
              statusCode:
                type: integer
                default: 200
              message:
                type: string
                default: Request processed successfully
              content:
                type: object
                properties:
                  token:
                    type: string
                    description: Token necesario para enviar en la cabecera de las demas peticiones
                  usuarioID:
                    type: integer
                    description: ID en la BD del erp del usuario que se acaba de autenticar
          examples:
            Example 1:
              value:
                statusCode: 200
                message: Request processed successfully
                content:
                  token: eyAidHlwIjoiSldUIiwgImFsZyI6IkhTMjU2IiB9.eyAidXNlcklEIjoiMSIsICJjdXN0b21lcklEIjoiMjkiLCAicnV0YUZvdG8iOiIiLCAidXNlck5hbWUiOiJBRE1JTklTVFJBRE9SIiwgImFkbWluaXN0cmFkb3IiOiIxIiwgImVtcHJlc2FJRCI6IjEiLCAiYXBpS2V5IjoibWlzZWNyZXRpdG8iLCAiaWF0IjoxNjY4NjE0NTg2LCAiZXhwIjoxNjY4NjIxNzg2IH0.CH41WeuWJD-yDF_TmXtk47RPUBwUp3IkdTedvuO8yvQ
                  usuarioID: 1
    login-400-response:
      description: autenticación fallida
      content:
        application/json:
          schema:
            type: object
            properties:
              statusCode:
                type: integer
              message:
                type: string
              content:
                type: object
                properties: {}
            x-examples:
              Example 1:
                statusCode: 400
                message: 'Credenciales no validas '
                content: {}
          examples:
            Example 1:
              value:
                statusCode: 400
                message: 'Credenciales no validas '
                content: {}
    login-404-response:
      description: Not Found
      content:
        application/json:
          schema:
            type: object
            properties:
              statusCode:
                type: integer
              message:
                type: string
              content:
                type: object
                properties: {}
            x-examples:
              Example 1:
                statusCode: 404
                message: No se encontró la licencia
                content: {}
          examples:
            Example 1:
              value:
                statusCode: 404
                message: No se encontró la licencia
                content: {}
    login-500-response:
      description: Internal Server Error
      content:
        application/json:
          schema:
            type: object
            properties:
              statusCode:
                type: integer
              message:
                type: string
              content:
                type: object
                properties: {}
            x-examples:
              Example 1:
                statusCode: 500
                message: Internal Server Error
                content: {}
          examples:
            Example 1:
              value:
                statusCode: 500
                message: Internal Server Error
                content: {}
